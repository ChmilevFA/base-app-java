plugins {
    id "application"
    id 'org.unbroken-dome.test-sets' version "$testSetsVersion"
    id 'com.github.johnrengelman.shadow' version "$shadowJar"
}

testSets {
    testFunctional
}
check.dependsOn testFunctional
testFunctional.mustRunAfter test

dependencies {
    implementation project(":repository-schema")
    implementation project(":repository")

    implementation "io.javalin:javalin:$javalinVersion"

    // TODO should be testImplementation after refactoring of repositories
    implementation "org.postgresql:postgresql:$postgresqlVersion"
    testImplementation "org.testcontainers:postgresql:$testcontainersVersion"
}

ext {
    javaMainClass = "net.chmilevfa.templates.base.TemplateApplication"
}

application {
    mainClassName = javaMainClass
}

jar.enabled = false